<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

<div class="card w-50 mb-3 mx-auto mt-4">
    <div class="card-body">
   

<form [formGroup]="registerDependentForm">
    <div formArrayName="dependents">

        <!-- <div *ngFor="let dependent of dependents.controls; let i=index" [formGroupName]="i" class="dependent-card mb-3 p-3 border"> -->
        @for (dependent of dependents.controls; track $index){  
        <div [formGroupName]="$index" class="dependent-card mb-3 p-3 border">
            <h5>Dependent {{$index + 1}}</h5>
            <button type="button" class="btn btn-danger mb-2" (click)="removeDependent($index)" [disabled]="dependents.length === 1">Remove</button>
            <div class="mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" formControlName="name" class="form-control" id="name" placeholder="Enter full name">
            </div>
            <div class="mb-3">
                <label for="dob" class="form-label">Date of Birth</label>
                <input type="date" formControlName="dob" class="form-control" id="dob" placeholder="Enter date of birth">
            </div>
            <div class="mb-3">
                <label for="contact" class="form-label">Contact Number</label>
                <input type="text" formControlName="contact" class="form-control" id="contact" placeholder="Enter contact number">
            </div>
            <div class="mb-3">
                <label for="address" class="form-label">Address</label>
                <textarea class="form-control" formControlName="address" id="address" placeholder="Enter Address" rows="2"></textarea>
            </div>
            <div class="mb-3">
                <label for="gender" class="form-label">Gender</label>
                <select class="form-select" id="gender" formControlName="gender" >
                    <option value="Male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="relationshipTypeId" class="form-label">Relationship Type</label><br/>
                <!-- <input type="radio" formControlName="relationshipTypeId" id="spouse{{$index}}" name="relationshipTypeId{{$index}}" value="1"> Spouse
                <input type="radio" formControlName="relationshipTypeId" id="child{{$index}}" name="relationshipTypeId{{$index}}" value="2"> Child
                <input type="radio" formControlName="relationshipTypeId" id="parent{{$index}}" name="relationshipTypeId{{$index}}" value="3"> Parent
                <input type="radio" formControlName="relationshipTypeId" id="sibling{{$index}}" name="relationshipTypeId{{$index}}" value="4"> Sibling
                <input type="radio" formControlName="relationshipTypeId" id="other{{$index}}" name="relationshipTypeId{{$index}}" value="5"> Other -->
                <input type="radio" formControlName="relationshipTypeId" id="spouse{{$index}}" value="1"> Spouse
                <input type="radio" formControlName="relationshipTypeId" id="child{{$index}}" value="2"> Child
                <input type="radio" formControlName="relationshipTypeId" id="parent{{$index}}" value="3"> Parent
                <input type="radio" formControlName="relationshipTypeId" id="sibling{{$index}}" value="4"> Sibling
                <input type="radio" formControlName="relationshipTypeId" id="other{{$index}}" value="5"> Other
            </div>
        </div>
        }
        <!-- </div> -->
        <button type="button" class="btn btn-secondary mb-2" (click)="addDependent()" [disabled]="dependents.length>=4">Add Dependent</button>
        <button type="button" class="btn btn-primary w-100" (click)="nextStep()">Continue</button>
    </div>
</form>

 </div>  
</div>