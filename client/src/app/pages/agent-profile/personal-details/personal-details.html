<form #pdForm="ngForm" (ngSubmit)="save()" novalidate>
  <div class="personal-details-grid">
    <div class="detail-item">
      <label>Username:</label>
      <span>{{ personal.username }}</span>
    </div>

    <div class="detail-item">
      <label>Name:</label>
      <span>{{ personal.name }}</span>
    </div>

    <div class="detail-item">
      <label>Email:</label>
      <span>{{ personal.email }}</span>
    </div>

    <div class="detail-item">
      <label>DOB:</label>
      <span>{{ personal.dob }}</span>
    </div>

    <!-- Phone with validation while editing -->
    <div class="detail-item">
      <label>Phone:</label>
      <span *ngIf="!editing">{{ personal.phone }}</span>
      <div *ngIf="editing">
        <input
          type="tel"
          [(ngModel)]="temp.phone"
          name="phone"
          required
          pattern="^[0-9]{10}$"
          maxlength="10"
          #phoneModel="ngModel"
          placeholder="10-digit phone number"
        />
        <div class="error" *ngIf="phoneModel.invalid && (phoneModel.dirty || phoneModel.touched)">
          <small *ngIf="phoneModel.errors?.['required']">Phone is required.</small>
          <small *ngIf="phoneModel.errors?.['pattern']">Phone must be exactly 10 digits.</small>
        </div>
      </div>
    </div>

    <div class="detail-item">
      <label>Gender:</label>
      <span>{{ personal.gender }}</span>
    </div>

    <!-- Address with validation while editing -->
    <div class="detail-item">
      <label>Address:</label>
      <span *ngIf="!editing">{{ personal.address }}</span>
      <div *ngIf="editing">
        <input
          [(ngModel)]="temp.address"
          name="address"
          required
          minlength="5"
          #addrModel="ngModel"
          placeholder="Enter address"
        />
        <div class="error" *ngIf="addrModel.invalid && (addrModel.dirty || addrModel.touched)">
          <small *ngIf="addrModel.errors?.['required']">Address is required.</small>
          <small *ngIf="addrModel.errors?.['minlength']">Minimum 5 characters.</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Optional TS-side summary (if any) -->
  <div class="error-list" *ngIf="validationErrors.length">
    <div class="error" *ngFor="let e of validationErrors">{{ e }}</div>
  </div>

  <div class="actions">
    <button *ngIf="!editing" type="button" (click)="edit()" class="blue-btn">Edit</button>

    <button
      *ngIf="editing"
      type="submit"
      class="blue-btn"
      [disabled]="pdForm.invalid"
      title="Fix validation errors to enable save"
    >
      Save
    </button>

    <button *ngIf="editing" type="button" (click)="cancel()" class="cancel-btn">Cancel</button>
  </div>
</form>